<!DOCTYPE html>
<html lang="ro">
<head>
    <meta charset="utf-8"/>
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <title>Admin - Windows Mioveni</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
    <style>
        .success-message { animation: slideIn 0.3s, fadeOut 3s forwards; }
        @keyframes slideIn { from { transform: translateX(100%); } to { transform: translateX(0); } }
        @keyframes fadeOut { 0% { opacity: 1; } 70% { opacity: 1; } 100% { opacity: 0; } }
        .preview-image { max-width: 200px; max-height: 150px; object-fit: cover; border-radius: 8px; margin-top: 10px; border: 2px solid #195de6; }
    </style>
</head>
<body class="bg-slate-100 font-sans">

    <script>
        // ===== LOGIN SIMPLU =====
        const utilizatorCorect = "admin";
        const parolaCorecta = "admin2026";
        
        const utilizator = prompt("üë§ Utilizator:");
        const parola = prompt("üîê ParolƒÉ:");
        
        if (utilizator !== utilizatorCorect || parola !== parolaCorecta) { 
            alert("‚ùå Acces respins!");
            window.location.href = "/"; 
        }
    </script>

    <div class="max-w-6xl mx-auto px-4 py-12">
        <!-- Header -->
        <div class="text-center mb-12">
            <div class="inline-flex items-center gap-2 bg-blue-600 text-white px-6 py-3 rounded-full mb-4">
                <span class="material-icons">admin_panel_settings</span>
                <span class="font-bold">ADMIN PANEL</span>
            </div>
            <h1 class="text-3xl font-bold text-slate-800 mb-2">Panou Control - Windows Mioveni</h1>
            <p class="text-slate-500">ModificƒÉ pre»õuri, text, contact »ôi servicii</p>
            <div class="w-20 h-1 bg-blue-600 mx-auto rounded-full mt-4"></div>
        </div>

        <!-- Tabs -->
        <div class="flex flex-wrap gap-2 mb-6 bg-white p-2 rounded-xl shadow-sm">
            <button onclick="showTab('preturi')" id="tab-preturi" class="tab-btn px-6 py-3 rounded-lg font-semibold bg-blue-600 text-white">üí∞ Pre»õuri</button>
            <button onclick="showTab('contact')" id="tab-contact" class="tab-btn px-6 py-3 rounded-lg font-semibold">üìû Contact</button>
            <button onclick="showTab('text')" id="tab-text" class="tab-btn px-6 py-3 rounded-lg font-semibold">üìù Text</button>
            <button onclick="showTab('servicii')" id="tab-servicii" class="tab-btn px-6 py-3 rounded-lg font-semibold">‚öôÔ∏è Servicii</button>
            <button onclick="showTab('imagini')" id="tab-imagini" class="tab-btn px-6 py-3 rounded-lg font-semibold">üñºÔ∏è Imagini</button>
        </div>

        <!-- Tab: Pre»õuri -->
        <div id="tab-preturi-content" class="bg-white p-8 rounded-2xl shadow-sm border border-slate-200 mb-6">
            <h3 class="text-xl font-bold mb-6 flex items-center gap-2 text-blue-700">
                <span class="material-icons">payments</span> Pre»õuri Servicii
            </h3>
            <div class="grid md:grid-cols-2 gap-6">
                <div>
                    <label class="block text-sm font-semibold text-slate-700 mb-2">Pachet Basic</label>
                    <input id="price_basic" type="text" class="w-full p-3 rounded-xl bg-slate-50 border border-slate-200 focus:ring-2 focus:ring-blue-600 outline-none" placeholder="ex: 100 RON">
                </div>
                <div>
                    <label class="block text-sm font-semibold text-slate-700 mb-2">Pachet Complet</label>
                    <input id="price_complet" type="text" class="w-full p-3 rounded-xl bg-slate-50 border border-slate-200 focus:ring-2 focus:ring-blue-600 outline-none" placeholder="ex: 180 RON">
                </div>
            </div>
        </div>

        <!-- Tab: Contact -->
        <div id="tab-contact-content" class="hidden bg-white p-8 rounded-2xl shadow-sm border border-slate-200 mb-6">
            <h3 class="text-xl font-bold mb-6 flex items-center gap-2 text-emerald-700">
                <span class="material-icons">contact_phone</span> Informa»õii Contact
            </h3>
            <div class="grid gap-6">
                <div>
                    <label class="block text-sm font-semibold text-slate-700 mb-2">NumƒÉr Telefon</label>
                    <input id="phone" type="text" class="w-full p-3 rounded-xl bg-slate-50 border border-slate-200 focus:ring-2 focus:ring-emerald-600 outline-none" placeholder="ex: 0748 123 456">
                </div>
                <div>
                    <label class="block text-sm font-semibold text-slate-700 mb-2">AdresƒÉ</label>
                    <input id="address" type="text" class="w-full p-3 rounded-xl bg-slate-50 border border-slate-200 focus:ring-2 focus:ring-emerald-600 outline-none" placeholder="ex: Strada PrincipalƒÉ, Mioveni">
                </div>
                <div class="grid md:grid-cols-2 gap-4">
                    <div>
                        <label class="block text-sm font-semibold text-slate-700 mb-2">Program Luni-Vineri</label>
                        <input id="program_week" type="text" class="w-full p-3 rounded-xl bg-slate-50 border border-slate-200 focus:ring-2 focus:ring-emerald-600 outline-none" placeholder="09:00 - 18:00">
                    </div>
                    <div>
                        <label class="block text-sm font-semibold text-slate-700 mb-2">Program S√¢mbƒÉtƒÉ</label>
                        <input id="program_sat" type="text" class="w-full p-3 rounded-xl bg-slate-50 border border-slate-200 focus:ring-2 focus:ring-emerald-600 outline-none" placeholder="10:00 - 14:00">
                    </div>
                </div>
            </div>
        </div>

        <!-- Tab: Text -->
        <div id="tab-text-content" class="hidden bg-white p-8 rounded-2xl shadow-sm border border-slate-200 mb-6">
            <h3 class="text-xl font-bold mb-6 flex items-center gap-2 text-purple-700">
                <span class="material-icons">edit</span> Text Principal
            </h3>
            <div class="grid gap-6">
                <div>
                    <label class="block text-sm font-semibold text-slate-700 mb-2">Titlu Principal</label>
                    <input id="hero_title" type="text" class="w-full p-3 rounded-xl bg-slate-50 border border-slate-200 focus:ring-2 focus:ring-purple-600 outline-none" placeholder="InstalƒÉri Windows ‚îÉ Mioveni">
                </div>
                <div>
                    <label class="block text-sm font-semibold text-slate-700 mb-2">Subtitlu</label>
                    <textarea id="hero_subtitle" rows="3" class="w-full p-3 rounded-xl bg-slate-50 border border-slate-200 focus:ring-2 focus:ring-purple-600 outline-none" placeholder="Descrierea principalƒÉ..."></textarea>
                </div>
            </div>
        </div>

        <!-- Tab: Servicii -->
        <div id="tab-servicii-content" class="hidden bg-white p-8 rounded-2xl shadow-sm border border-slate-200 mb-6">
            <h3 class="text-xl font-bold mb-6 flex items-center gap-2 text-orange-700">
                <span class="material-icons">build</span> Descrieri Servicii
            </h3>
            <div class="grid gap-6">
                <div>
                    <label class="block text-sm font-semibold text-slate-700 mb-2">Serviciu 1 - Instalare Windows</label>
                    <textarea id="service1_desc" rows="2" class="w-full p-3 rounded-xl bg-slate-50 border border-slate-200 focus:ring-2 focus:ring-orange-600 outline-none"></textarea>
                </div>
                <div>
                    <label class="block text-sm font-semibold text-slate-700 mb-2">Serviciu 2 - Optimizare Sistem</label>
                    <textarea id="service2_desc" rows="2" class="w-full p-3 rounded-xl bg-slate-50 border border-slate-200 focus:ring-2 focus:ring-orange-600 outline-none"></textarea>
                </div>
                <div>
                    <label class="block text-sm font-semibold text-slate-700 mb-2">Serviciu 3 - Drivere & Programe</label>
                    <textarea id="service3_desc" rows="2" class="w-full p-3 rounded-xl bg-slate-50 border border-slate-200 focus:ring-2 focus:ring-orange-600 outline-none"></textarea>
                </div>
                <div>
                    <label class="block text-sm font-semibold text-slate-700 mb-2">Serviciu 4 - Recuperare Date</label>
                    <textarea id="service4_desc" rows="2" class="w-full p-3 rounded-xl bg-slate-50 border border-slate-200 focus:ring-2 focus:ring-orange-600 outline-none"></textarea>
                </div>
            </div>
        </div>

        <!-- Tab: Imagini -->
        <div id="tab-imagini-content" class="hidden bg-white p-8 rounded-2xl shadow-sm border border-slate-200 mb-6">
            <h3 class="text-xl font-bold mb-6 flex items-center gap-2 text-pink-700">
                <span class="material-icons">image</span> Imagini
            </h3>
            <div class="grid gap-6">
                <div>
                    <label class="block text-sm font-semibold text-slate-700 mb-2">URL Imagine Header</label>
                    <input id="header_image" type="text" class="w-full p-3 rounded-xl bg-slate-50 border border-slate-200 focus:ring-2 focus:ring-pink-600 outline-none" placeholder="https://...">
                    <div id="header-preview" class="mt-4"></div>
                </div>
                <div>
                    <label class="block text-sm font-semibold text-slate-700 mb-2">URL Logo (op»õional)</label>
                    <input id="logo_image" type="text" class="w-full p-3 rounded-xl bg-slate-50 border border-slate-200 focus:ring-2 focus:ring-pink-600 outline-none" placeholder="https://...">
                    <div id="logo-preview" class="mt-4"></div>
                </div>
            </div>
        </div>

        <!-- Buton Salvare -->
        <div class="text-center">
            <button onclick="saveAllChanges()" class="px-12 py-4 bg-gradient-to-r from-green-500 to-green-600 text-white font-bold rounded-xl shadow-lg hover:shadow-xl transition-all text-lg">
                <span class="flex items-center justify-center gap-3">
                    <span class="material-icons">save</span>
                    SALVEAZƒÇ TOATE MODIFICƒÇRILE √éN JSON
                </span>
            </button>
            <p class="text-sm text-slate-500 mt-4">‚ö†Ô∏è ModificƒÉrile vor fi salvate √Æn data/content.json</p>
        </div>

        <!-- Mesaje -->
        <div id="message-container" class="fixed bottom-4 right-4 z-50"></div>
    </div>

    <script>
        // ===== VARIABILE GLOBALE =====
        let currentData = {};

        // ===== FUNC»öII TAB-URI =====
        function showTab(tabName) {
            // Ascunde toate tab-urile
            document.getElementById('tab-preturi-content').classList.add('hidden');
            document.getElementById('tab-contact-content').classList.add('hidden');
            document.getElementById('tab-text-content').classList.add('hidden');
            document.getElementById('tab-servicii-content').classList.add('hidden');
            document.getElementById('tab-imagini-content').classList.add('hidden');
            
            // AratƒÉ tab-ul selectat
            document.getElementById(`tab-${tabName}-content`).classList.remove('hidden');
            
            // ActualizeazƒÉ butoanele
            document.querySelectorAll('.tab-btn').forEach(btn => {
                btn.classList.remove('bg-blue-600', 'text-white');
                btn.classList.add('bg-white', 'text-slate-700');
            });
            document.getElementById(`tab-${tabName}`).classList.add('bg-blue-600', 'text-white');
        }

        // ===== √éNCƒÇRCARE DATE =====
        function loadData() {
            fetch('/data/content.json?t=' + new Date().getTime())
                .then(response => response.json())
                .then(data => {
                    currentData = data;
                    
                    // Pre»õuri
                    document.getElementById('price_basic').value = data.price_basic || '100 RON';
                    document.getElementById('price_complet').value = data.price_complet || '180 RON';
                    
                    // Contact
                    document.getElementById('phone').value = data.phone || '0748 123 456';
                    document.getElementById('address').value = data.address || 'Strada PrincipalƒÉ, Mioveni';
                    document.getElementById('program_week').value = data.program_week || '09:00 - 18:00';
                    document.getElementById('program_sat').value = data.program_sat || '10:00 - 14:00';
                    
                    // Text
                    document.getElementById('hero_title').value = data.hero_title || 'InstalƒÉri Windows ‚îÉ Mioveni';
                    document.getElementById('hero_subtitle').value = data.hero_subtitle || 'Servicii profesionale de instalare...';
                    
                    // Servicii
                    document.getElementById('service1_desc').value = data.service1_desc || 'Instalare profesionalƒÉ pentru Windows 10 »ôi 11, activare licen»õƒÉ »ôi configurƒÉri ini»õiale.';
                    document.getElementById('service2_desc').value = data.service2_desc || 'CurƒÉ»õare software, eliminare fi»ôiere temporare »ôi optimizare startup.';
                    document.getElementById('service3_desc').value = data.service3_desc || 'Instalare drivere compatibile, suitƒÉ Office »ôi browsere.';
                    document.getElementById('service4_desc').value = data.service4_desc || 'Recuperare profesionalƒÉ a fi»ôierelor pierdute sau »ôterse accidental.';
                    
                    // Imagini
                    document.getElementById('header_image').value = data.header_image || 'https://images.unsplash.com/photo-1588702547919-26089e690eca';
                    document.getElementById('logo_image').value = data.logo_image || '';
                    
                    // Previzualizare imagini
                    if (data.header_image) {
                        document.getElementById('header-preview').innerHTML = `<img src="${data.header_image}" class="preview-image">`;
                    }
                    if (data.logo_image) {
                        document.getElementById('logo-preview').innerHTML = `<img src="${data.logo_image}" class="preview-image">`;
                    }
                    
                    showMessage('‚úÖ Date √ÆncƒÉrcate cu succes', 'green');
                })
                .catch(err => {
                    console.log('Eroare la √ÆncƒÉrcare:', err);
                    showMessage('‚ùå Eroare la √ÆncƒÉrcarea datelor', 'red');
                });
        }

        // ===== SALVARE DATE =====
        function saveAllChanges() {
            // ColecteazƒÉ toate datele
            const newData = {
                hero_title: document.getElementById('hero_title').value,
                hero_subtitle: document.getElementById('hero_subtitle').value,
                phone: document.getElementById('phone').value,
                address: document.getElementById('address').value,
                program_week: document.getElementById('program_week').value,
                program_sat: document.getElementById('program_sat').value,
                price_basic: document.getElementById('price_basic').value,
                price_complet: document.getElementById('price_complet').value,
                service1_desc: document.getElementById('service1_desc').value,
                service2_desc: document.getElementById('service2_desc').value,
                service3_desc: document.getElementById('service3_desc').value,
                service4_desc: document.getElementById('service4_desc').value,
                header_image: document.getElementById('header_image').value,
                logo_image: document.getElementById('logo_image').value
            };

            showMessage('üíæ Se salveazƒÉ...', 'blue');

            // Salvare √Æn fi»ôier JSON (prin API)
            fetch('/api/save-data', {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify(newData)
            })
            .then(response => response.json())
            .then(result => {
                showMessage('‚úÖ Date salvate cu succes √Æn content.json', 'green');
                console.log('Date salvate:', newData);
            })
            .catch(error => {
                console.error('Eroare:', error);
                showMessage('‚ùå Eroare la salvare. VerificƒÉ consola (F12)', 'red');
                
                // Backup √Æn localStorage
                localStorage.setItem('backup_data', JSON.stringify(newData));
                showMessage('üíæ Backup salvat √Æn browser', 'yellow');
            });
        }

        // ===== AFI»òARE MESAJ =====
        function showMessage(text, color) {
            const container = document.getElementById('message-container');
            const msg = document.createElement('div');
            msg.className = `bg-${color}-500 text-white px-6 py-4 rounded-lg shadow-lg mb-2 success-message flex items-center gap-2`;
            msg.innerHTML = `<span class="material-icons">${color === 'green' ? 'check_circle' : color === 'red' ? 'error' : 'info'}</span> ${text}`;
            container.appendChild(msg);
            
            setTimeout(() => {
                msg.remove();
            }, 3000);
        }

        // ===== PREVIZUALIZARE IMAGINI =====
        document.getElementById('header_image').addEventListener('input', function() {
            if (this.value) {
                document.getElementById('header-preview').innerHTML = `<img src="${this.value}" class="preview-image">`;
            }
        });
        
        document.getElementById('logo_image').addEventListener('input', function() {
            if (this.value) {
                document.getElementById('logo-preview').innerHTML = `<img src="${this.value}" class="preview-image">`;
            }
        });

        // ===== LA √éNCƒÇRCARE =====
        window.onload = function() {
            loadData();
            showTab('preturi'); // AratƒÉ tab-ul de pre»õuri prima datƒÉ
        };
    </script>

    <!-- Instruc»õiuni -->
    <div class="max-w-6xl mx-auto px-4 mt-8">
        <div class="bg-blue-50 border border-blue-200 rounded-xl p-6 text-sm text-blue-800">
            <h4 class="font-bold mb-2 flex items-center gap-2">
                <span class="material-icons text-blue-600">info</span>
                Cum func»õioneazƒÉ:
            </h4>
            <ol class="list-decimal ml-8 space-y-1">
                <li>ModificƒÉ ce ai nevoie √Æn fiecare tab</li>
                <li>ApasƒÉ "SALVEAZƒÇ TOATE MODIFICƒÇRILE √éN JSON"</li>
                <li>Fi»ôierul <code>data/content.json</code> se actualizeazƒÉ</li>
                <li>Site-ul se va actualiza automat (are deja fetch la JSON)</li>
            </ol>
            <p class="mt-4 text-yellow-700 bg-yellow-50 p-3 rounded-lg">
                <span class="font-bold">‚ö†Ô∏è ATEN»öIE:</span> Pentru ca salvarea sƒÉ func»õioneze, ai nevoie de un API endpoint la <code>/api/save-data</code>. DacƒÉ nu ai, datele se salveazƒÉ √Æn localStorage.
            </p>
        </div>
    </div>
</body>
</html>
