<!DOCTYPE html>
<html lang="ro">
<head>
    <meta charset="utf-8"/>
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <title>Admin - Windows Mioveni</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
    <style>
        .save-btn { transition: all 0.3s; }
        .save-btn:hover { transform: translateY(-2px); box-shadow: 0 10px 25px -5px rgba(37, 99, 235, 0.5); }
        .success-message { animation: fadeOut 3s forwards; }
        @keyframes fadeOut { 0% { opacity: 1; } 70% { opacity: 1; } 100% { opacity: 0; } }
    </style>
</head>
<body class="bg-slate-100 font-sans">

    <script>
        // ===== LOGIN SIMPLU =====
        const utilizatorCorect = "admin";
        const parolaCorecta = "admin2026";
        
        const utilizator = prompt("üë§ Utilizator:");
        const parola = prompt("üîê ParolƒÉ:");
        
        if (utilizator !== utilizatorCorect || parola !== parolaCorecta) { 
            alert("‚ùå Acces respins! Vei fi redirec»õionat.");
            window.location.href = "/"; 
        }
    </script>

    <div id="admin-ui" class="max-w-6xl mx-auto px-4 py-12">
        <!-- Header -->
        <div class="text-center mb-12">
            <div class="inline-flex items-center gap-2 bg-blue-600 text-white px-6 py-3 rounded-full mb-4">
                <span class="material-icons">admin_panel_settings</span>
                <span class="font-bold">ADMIN PANEL</span>
            </div>
            <h1 class="text-3xl font-bold text-slate-800 mb-2">Panou Control - Windows Mioveni</h1>
            <p class="text-slate-500">ModificƒÉ pre»õuri, text »ôi informa»õii de contact</p>
            <div class="w-20 h-1 bg-blue-600 mx-auto rounded-full mt-4"></div>
        </div>

        <!-- Grid cu 2 coloane -->
        <div class="grid md:grid-cols-2 gap-8">
            <!-- Coloana 1: Pre»õuri -->
            <div class="bg-white p-8 rounded-2xl shadow-sm border border-slate-200">
                <h3 class="text-xl font-bold mb-6 flex items-center gap-2 text-blue-700">
                    <span class="material-icons">payments</span> Pre»õuri Servicii
                </h3>
                <div class="space-y-6">
                    <!-- Pachet Basic -->
                    <div>
                        <label class="block text-xs font-bold text-slate-400 uppercase mb-2">Pachet Basic (RON)</label>
                        <input id="in-basic" type="number" class="w-full p-3 rounded-xl bg-slate-50 border border-slate-200 focus:ring-2 focus:ring-blue-600 outline-none" placeholder="ex: 100">
                        <button onclick="saveToCMS('price_basic', document.getElementById('in-basic').value + ' RON')" class="mt-3 px-6 py-2 bg-blue-600 text-white font-bold rounded-lg hover:bg-blue-700 transition-all save-btn">
                            <span class="flex items-center gap-2">
                                <span class="material-icons text-sm">save</span>
                                SalveazƒÉ Basic
                            </span>
                        </button>
                    </div>
                    <!-- Pachet Complet -->
                    <div>
                        <label class="block text-xs font-bold text-slate-400 uppercase mb-2">Pachet Complet (RON)</label>
                        <input id="in-complet" type="number" class="w-full p-3 rounded-xl bg-slate-50 border border-slate-200 focus:ring-2 focus:ring-blue-600 outline-none" placeholder="ex: 180">
                        <button onclick="saveToCMS('price_complet', document.getElementById('in-complet').value + ' RON')" class="mt-3 px-6 py-2 bg-blue-600 text-white font-bold rounded-lg hover:bg-blue-700 transition-all save-btn">
                            <span class="flex items-center gap-2">
                                <span class="material-icons text-sm">save</span>
                                SalveazƒÉ Complet
                            </span>
                        </button>
                    </div>
                </div>
            </div>

            <!-- Coloana 2: Contact -->
            <div class="bg-white p-8 rounded-2xl shadow-sm border border-slate-200">
                <h3 class="text-xl font-bold mb-6 flex items-center gap-2 text-emerald-700">
                    <span class="material-icons">contact_phone</span> Contact Rapid
                </h3>
                <div class="space-y-6">
                    <!-- Telefon -->
                    <div>
                        <label class="block text-xs font-bold text-slate-400 uppercase mb-2">NumƒÉr Telefon</label>
                        <input id="in-phone" type="tel" class="w-full p-3 rounded-xl bg-slate-50 border border-slate-200 focus:ring-2 focus:ring-emerald-600 outline-none" placeholder="ex: 0748 123 456">
                        <button onclick="saveToCMS('phone', document.getElementById('in-phone').value)" class="mt-3 w-full py-3 bg-emerald-600 text-white font-bold rounded-lg hover:bg-emerald-700 transition-all uppercase tracking-widest save-btn">
                            <span class="flex items-center justify-center gap-2">
                                <span class="material-icons text-sm">phone</span>
                                ActualizeazƒÉ Telefon
                            </span>
                        </button>
                    </div>
                    
                    <!-- AdresƒÉ (c√¢mp nou) -->
                    <div class="pt-4 border-t border-slate-100">
                        <label class="block text-xs font-bold text-slate-400 uppercase mb-2">AdresƒÉ</label>
                        <input id="in-address" type="text" class="w-full p-3 rounded-xl bg-slate-50 border border-slate-200 focus:ring-2 focus:ring-emerald-600 outline-none" placeholder="ex: Strada PrincipalƒÉ, Mioveni">
                        <button onclick="saveToCMS('address', document.getElementById('in-address').value)" class="mt-3 w-full py-3 bg-emerald-600 text-white font-bold rounded-lg hover:bg-emerald-700 transition-all">
                            <span class="flex items-center justify-center gap-2">
                                <span class="material-icons text-sm">location_on</span>
                                ActualizeazƒÉ AdresƒÉ
                            </span>
                        </button>
                    </div>
                </div>
            </div>

            <!-- Coloana 3: Text (ocupƒÉ toatƒÉ lƒÉ»õimea) -->
            <div class="md:col-span-2 bg-white p-8 rounded-2xl shadow-sm border border-slate-200">
                <h3 class="text-xl font-bold mb-6 flex items-center gap-2 text-purple-700">
                    <span class="material-icons">edit</span> Text Principal
                </h3>
                <div class="grid md:grid-cols-2 gap-6">
                    <!-- Titlu Hero -->
                    <div>
                        <label class="block text-xs font-bold text-slate-400 uppercase mb-2">Titlu Principal</label>
                        <input id="in-hero-title" type="text" class="w-full p-3 rounded-xl bg-slate-50 border border-slate-200 focus:ring-2 focus:ring-purple-600 outline-none" placeholder="InstalƒÉri Windows ‚îÉ Mioveni">
                        <button onclick="saveToCMS('hero_title', document.getElementById('in-hero-title').value)" class="mt-3 px-6 py-2 bg-purple-600 text-white font-bold rounded-lg hover:bg-purple-700 transition-all">
                            <span class="flex items-center gap-2">
                                <span class="material-icons text-sm">title</span>
                                SalveazƒÉ Titlu
                            </span>
                        </button>
                    </div>
                    <!-- Subtitlu -->
                    <div>
                        <label class="block text-xs font-bold text-slate-400 uppercase mb-2">Subtitlu</label>
                        <textarea id="in-hero-subtitle" rows="3" class="w-full p-3 rounded-xl bg-slate-50 border border-slate-200 focus:ring-2 focus:ring-purple-600 outline-none" placeholder="Descrierea principalƒÉ..."></textarea>
                        <button onclick="saveToCMS('hero_subtitle', document.getElementById('in-hero-subtitle').value)" class="mt-3 px-6 py-2 bg-purple-600 text-white font-bold rounded-lg hover:bg-purple-700 transition-all">
                            <span class="flex items-center gap-2">
                                <span class="material-icons text-sm">description</span>
                                SalveazƒÉ Subtitlu
                            </span>
                        </button>
                    </div>
                </div>
            </div>
        </div>

        <!-- Status »ôi mesaje -->
        <div id="message-container" class="fixed bottom-4 right-4"></div>
        
        <!-- Buton Publicare -->
        <div class="mt-8 text-center">
            <button onclick="publishChanges()" class="px-12 py-4 bg-gradient-to-r from-green-500 to-green-600 text-white font-bold rounded-xl shadow-lg hover:shadow-xl transition-all text-lg">
                <span class="flex items-center justify-center gap-3">
                    <span class="material-icons">publish</span>
                    PUBLICƒÇ TOATE MODIFICƒÇRILE PE SITE
                </span>
            </button>
            <p class="text-sm text-slate-500 mt-4">‚ö†Ô∏è DupƒÉ ce ai fƒÉcut toate modificƒÉrile, apasƒÉ butonul de mai sus</p>
        </div>
    </div>

    <!-- CMS Script -->
    <script src="https://unpkg.com/decap-cms@^3.0.0/dist/decap-cms.js"></script>
    
    <script>
        // ===== CONFIGURARE CMS =====
        CMS.init({
            config: {
                backend: {
                    name: "github",
                    repo: "stefimihai27/instalari-windows-mioveni",
                    branch: "main",
                    auth_type: "token" // Folose»ôte Personal Access Token
                },
                load_config_file: false,
                display_url: "https://instalari-windows-mioveni.netlify.app",
                collections: [{
                    name: "setari",
                    label: "SetƒÉri Site",
                    files: [{
                        name: "home",
                        label: "Pagina PrincipalƒÉ",
                        file: "index.html",
                        fields: [
                            { label: "Titlu Principal", name: "hero_title", widget: "string" },
                            { label: "Subtitlu", name: "hero_subtitle", widget: "text" },
                            { label: "Telefon", name: "phone", widget: "string" },
                            { label: "AdresƒÉ", name: "address", widget: "string" },
                            { label: "Pre»õ Basic", name: "price_basic", widget: "string" },
                            { label: "Pre»õ Complet", name: "price_complet", widget: "string" }
                        ]
                    }]
                }]
            }
        });

        // ===== FUNC»öII AJUTƒÇTOARE =====
        let cmsEntry = null;
        let cmsEditor = null;

        // √éncƒÉrcare date existente
        setTimeout(() => {
            try {
                // √éncearcƒÉ sƒÉ preia datele din CMS
                console.log("√éncerc sƒÉ √Æncarc datele existente...");
                
                // SeteazƒÉ valori implicite dupƒÉ 3 secunde dacƒÉ nu s-au √ÆncƒÉrcat
                setTimeout(() => {
                    if (!document.getElementById('in-basic').value) {
                        document.getElementById('in-basic').value = "100";
                        document.getElementById('in-complet').value = "180";
                        document.getElementById('in-phone').value = "0748 123 456";
                        document.getElementById('in-address').value = "Strada PrincipalƒÉ, Mioveni";
                        document.getElementById('in-hero-title').value = "InstalƒÉri Windows ‚îÉ Mioveni";
                        document.getElementById('in-hero-subtitle').value = "Servicii profesionale de instalare sisteme de operare, actualizare drivere »ôi optimizare software pentru performan»õƒÉ maximƒÉ.";
                    }
                }, 2000);
                
            } catch (e) {
                console.log("Eroare la √ÆncƒÉrcare date, se folosesc valorile implicite");
            }
        }, 1000);

        // Salvare √Æn CMS
        function saveToCMS(field, value) {
            try {
                // AratƒÉ un mesaj de √ÆncƒÉrcare
                showMessage("Se salveazƒÉ...", "blue");
                
                // Salvare efectivƒÉ
                setTimeout(() => {
                    showMessage(`‚úÖ ${field} a fost salvat local! Acum apasƒÉ PUBLICƒÇ.`, "green");
                }, 500);
                
                // Aici po»õi salva »ôi √Æn localStorage pentru backup
                localStorage.setItem(field, value);
                
            } catch (e) {
                showMessage("‚ùå Eroare! VerificƒÉ token-ul GitHub.", "red");
            }
        }

        // Publicare toate modificƒÉrile
        function publishChanges() {
            // ColecteazƒÉ toate valorile
            const data = {
                hero_title: document.getElementById('in-hero-title').value,
                hero_subtitle: document.getElementById('in-hero-subtitle').value,
                phone: document.getElementById('in-phone').value,
                address: document.getElementById('in-address').value,
                price_basic: document.getElementById('in-basic').value + " RON",
                price_complet: document.getElementById('in-complet').value + " RON"
            };
            
            // SalveazƒÉ √Æn localStorage
            localStorage.setItem('siteData', JSON.stringify(data));
            
            showMessage("üì¶ Date pregƒÉtite pentru publicare!", "green");
            
            // Deschide GitHub sau CMS
            if (confirm("Datele au fost salvate local. Vrei sƒÉ deschizi GitHub pentru a face commit?")) {
                window.open("https://github.com/stefimihai27/instalari-windows-mioveni", "_blank");
            }
        }

        // Afi»ôare mesaj
        function showMessage(text, color) {
            const container = document.getElementById('message-container');
            const msg = document.createElement('div');
            msg.className = `bg-${color}-500 text-white px-6 py-3 rounded-lg shadow-lg mb-2 success-message`;
            msg.innerHTML = text;
            container.appendChild(msg);
            
            setTimeout(() => {
                msg.remove();
            }, 3000);
        }

        // √éncƒÉrcare date din localStorage la pornire
        (function loadFromLocal() {
            const saved = localStorage.getItem('siteData');
            if (saved) {
                try {
                    const data = JSON.parse(saved);
                    if (data.hero_title) document.getElementById('in-hero-title').value = data.hero_title;
                    if (data.hero_subtitle) document.getElementById('in-hero-subtitle').value = data.hero_subtitle;
                    if (data.phone) document.getElementById('in-phone').value = data.phone;
                    if (data.address) document.getElementById('in-address').value = data.address;
                    if (data.price_basic) document.getElementById('in-basic').value = data.price_basic.replace(' RON', '');
                    if (data.price_complet) document.getElementById('in-complet').value = data.price_complet.replace(' RON', '');
                } catch (e) {}
            }
        })();
    </script>

    <!-- Instruc»õiuni pentru client -->
    <div class="max-w-6xl mx-auto px-4 mt-8">
        <div class="bg-blue-50 border border-blue-200 rounded-xl p-6 text-sm text-blue-800">
            <h4 class="font-bold mb-2 flex items-center gap-2">
                <span class="material-icons text-blue-600">info</span>
                Instruc»õiuni pentru publicare:
            </h4>
            <ol class="list-decimal ml-8 space-y-1">
                <li>ModificƒÉ ce ai nevoie √Æn c√¢mpurile de mai sus</li>
                <li>ApasƒÉ "PUBLICƒÇ TOATE MODIFICƒÇRILE"</li>
                <li>ConfirmƒÉ deschiderea GitHub</li>
                <li>Pe GitHub, fƒÉ click pe "Commit changes"</li>
                <li>Site-ul se actualizeazƒÉ automat √Æn 1-2 minute</li>
            </ol>
        </div>
    </div>
</body>
</html>
